<!DOCTYPE html>
<html lang="zh-CN">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="Ubuntu + 2*1080Ti 深度学习环境配置配置及环境


配件
型号
数量




机箱
美商海盗船 AIR740 中塔机箱
1


电源
美商海盗船 HX1000 80plus 1000W
1


主板
华硕（ASUS） X99-M WS (Intel X99/LGA 2011-V3)
">
    

    <!--Author-->
    
        <meta name="author" content="Robert Lexis">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Ubuntu + 2*1080Ti 深度学习环境配置"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="This is WHY."/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

        <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>Ubuntu + 2*1080Ti 深度学习环境配置 - This is WHY.</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Google Analytics -->
    


    <!-- favicon -->
    
	
</head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">This is WHY.</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/">
                            
                                Home
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives">
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags">
                            
                                Tags
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories">
                            
                                Categories
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="https://github.com/RobertLexis">
                            
                                <i class="fa fa-github fa-stack-2x"></i>
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-image: url('http://www.codeblocq.com/assets/projects/hexo-theme-clean-blog/img/home-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Ubuntu + 2*1080Ti 深度学习环境配置</h1>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                        
                            2017-11-13
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Tags and categories -->
           

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <h2 id="Ubuntu-2-1080Ti-深度学习环境配置"><a href="#Ubuntu-2-1080Ti-深度学习环境配置" class="headerlink" title="Ubuntu + 2*1080Ti 深度学习环境配置"></a>Ubuntu + 2*1080Ti 深度学习环境配置</h2><h3 id="配置及环境"><a href="#配置及环境" class="headerlink" title="配置及环境"></a>配置及环境</h3><table>
<thead>
<tr>
<th>配件</th>
<th>型号</th>
<th>数量</th>
</tr>
</thead>
<tbody>
<tr>
<td>机箱</td>
<td>美商海盗船 AIR740 中塔机箱</td>
<td>1</td>
</tr>
<tr>
<td>电源</td>
<td>美商海盗船 HX1000 80plus 1000W</td>
<td>1</td>
</tr>
<tr>
<td>主板</td>
<td>华硕（ASUS） X99-M WS (Intel X99/LGA 2011-V3)</td>
<td>1</td>
</tr>
<tr>
<td>CPU</td>
<td>英特尔 至强 E5-2620</td>
<td>1</td>
</tr>
<tr>
<td>散热</td>
<td>猫头鹰NH-U9S CPU散热器</td>
<td>1</td>
</tr>
<tr>
<td>硬盘</td>
<td>西部数据 红盘 3T</td>
<td>2</td>
</tr>
<tr>
<td>SSD</td>
<td>英特尔 600P 256G M.2</td>
<td>1</td>
</tr>
<tr>
<td>内存</td>
<td>美商海盗船 DDR4 3000 16G</td>
<td>2</td>
</tr>
<tr>
<td>GPU</td>
<td>技嘉 AORUS GTX 1080Ti Xtreme Edition</td>
<td>2</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th></th>
<th>版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ubuntu</td>
<td>16.04.1</td>
</tr>
<tr>
<td>Nvidia driver</td>
<td>384.98</td>
</tr>
</tbody>
</table>
<h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><ol>
<li><p>禁用 UEFI Secure Boot，不同的主板有不同的方法。Rod Smith 在 <a href="http://www.rodsbooks.com/efi-bootloaders/secureboot.html#disable" target="_blank" rel="external">Managing EFI Boot Loaders for Linux: Dealing with Secure Boot</a> 中描述的很细致。如果不禁用的话，会出现：</p>
<ol>
<li>驱动安装成功后并不会被成功地启动。<code>nvidia-smi</code>并不能成功地查看到 GPU 的信息。而是会报出 <code>NVIDIA-SMI has failed because it couldn&#39;t communicate with the NVIDIA driver. Make sure that the latest NVIDIA driver is installed and running.</code> 的错误。</li>
<li><p>开机后，在图形登录界面即使密码正确，也不能成功地登录（仍可以通过终端成功地登陆），而是不断地循环在输入密码、再次要求输入密码之间。</p>
<blockquote>
<p>Unified Extensible Firmware Interface<br>The Unified Extensible Firmware Interface (UEFI) is a specification(规格, 标准) that defines a software interface between an operating system and platform firmware. UEFI replaces the Basic Input/Output System (BIOS) firmware interface originally present in all IBM PC-compatible personal computers, with most UEFI firmware implementations providing legacy support for BIOS services. UEFI can support remote diagnostics and repair of computers, even with no operating system installed. The user can enter a setup utility by pressing their manufacturers specific setup keys. Most common keys are Delete,F2, F12,esc etc.</p>
</blockquote>
</li>
</ol>
</li>
<li><p>关闭 X server。由于我是使用 Xshell 通过 ssh 登陆的，因此此处我就直接通过 <code>service lightdm stop</code> 关闭了图形界面，此时可以看到远端机器的屏幕黑屏了。这里命令需要根据具体的图形桌面是kdm，gdm，还是 lightdm 而定。<br>如果不关闭X server 就会报出 <code>You appear to be running an X server; please exit X before installing.</code>。</p>
<blockquote>
<p>X server 是 Linux 系统里图形接口服务器的简称。Windows 系统的界面是其系统构成不可分割的一部分，各种窗口操作的界面显示都是由系统核心直接管理的，而 Linux 的图形界面并不是系统的必要组成部分，Linux 可以在无界面的条件下运行。当需要 Linux 提供界面的时候，系统就会建立一个或者数个 X server，通过 X 协议跟窗口管理器交互，由独立于系统的应用程序来产生窗口，状态栏，按钮之类的交互界面。</p>
<p>比较常见的 Linux 图形界面操作环境有 KDE 和 GNOME，为它们提供系统支持的就是 X server，而并非 Linux 核心。总结一下 Linux 图形界面层次关系：Linux本身–&gt;X服务器&lt;-[通过X协议交谈]-窗口管理器–&gt;X应用程序。</p>
</blockquote>
</li>
</ol>
<h3 id="安装显卡驱动"><a href="#安装显卡驱动" class="headerlink" title="安装显卡驱动"></a>安装显卡驱动</h3><ol>
<li>到英伟达<a href="http://www.nvidia.cn/Download/index.aspx?lang=cn" target="_blank" rel="external">驱动程序下载官网</a>下载对应于显卡型号的驱动。</li>
<li><p>安装</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">chmod a+x NVIDIA-Linux-x86_64-384.98.run</div><div class="line">./NVIDIA-Linux-x86_64-384.98.run</div></pre></td></tr></table></figure>
<p> 安装过程中会询问是否通过 x-config 屏蔽开源驱动 nouveau，选择接受通过 x-config 进行备份，这样安装失败时，通过 <code>./NVIDIA-Linux-x86_64-384.98.run --uninstall</code> 卸载驱动，恢复使用 nouveau 就仍然可以使用图形界面。</p>
</li>
<li><code>nvidia-smi</code>查看显卡信息。<br> <img src="http://oytnj8g2y.bkt.clouddn.com/nvidia_smi.png" alt="显卡信息"></li>
</ol>
<h3 id="安装CUDA"><a href="#安装CUDA" class="headerlink" title="安装CUDA"></a>安装CUDA</h3><ol>
<li>按照 <a href="http://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html" target="_blank" rel="external">CUDA TOOLKIT DOCUMENTATION</a> 给出的步骤进行 Pre-installation Actions，Package Manager Installation，Post-installation Actions 安装。</li>
<li>到英伟达<a href="https://developer.nvidia.com/cuda-downloads" target="_blank" rel="external">CUDA Toolkit Download 官网</a>下载对应操作系统的 CUDA 。</li>
<li>如果安装失败，需要重新尝试时通过 <code>sudo apt-get --purge remove cuda</code> 对 CUDA 进行卸载。</li>
</ol>


                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    


                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr />

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    

                    

                    
                        <li>
                            <a href="https://github.com/RobertLexis" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    

                    

                    
                </ul>
                <p class="copyright text-muted">&copy; 2017 Robert Lexis<br></p>
                <p class="copyright text-muted">Original Theme <a target="_blank" href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a> from <a href="http://startbootstrap.com/" target="_blank">Start Bootstrap</a></p>
                <p class="copyright text-muted">Adapted for <a target="_blank" href="https://hexo.io/">Hexo</a> by <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a></p>
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->



</body>

</html>